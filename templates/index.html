<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Resume Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #ec4899;
            --linkedin: #0077b5;
            --linkedin-dark: #005885;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1f2937;
            --light: #f8fafc;
            --gray: #6b7280;
            --gray-light: #e5e7eb;
        }

        body {
            font-family: 'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="rgba(255,255,255,0.1)"><polygon points="0,0 1000,50 1000,100 0,100"/></svg>');
            background-size: cover;
        }

        .header-content {
            position: relative;
            z-index: 2;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 15px;
            font-weight: 700;
            background: linear-gradient(135deg, #fff 0%, #e0e7ff 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header p {
            font-size: 1.3em;
            opacity: 0.9;
            font-weight: 300;
            max-width: 600px;
            margin: 0 auto;
        }

        .header-icon {
            font-size: 2em;
            margin-bottom: 20px;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            background: white;
            border-bottom: 1px solid var(--gray-light);
            padding: 0 30px;
        }

        .nav-tab {
            padding: 20px 30px;
            font-weight: 600;
            color: var(--gray);
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-tab:hover {
            color: var(--primary);
            background: rgba(99, 102, 241, 0.05);
        }

        .nav-tab.active {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
            background: rgba(99, 102, 241, 0.08);
        }

        .tab-content {
            display: none;
            padding: 40px;
            min-height: 600px;
        }

        .tab-content.active {
            display: block;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .nav-tabs {
                flex-wrap: wrap;
                padding: 0 15px;
            }
            
            .nav-tab {
                padding: 15px 20px;
                flex: 1;
                min-width: 120px;
                justify-content: center;
            }
        }

        .input-section {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .section-title {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            color: var(--primary);
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        label {
            font-weight: 600;
            color: var(--dark);
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        label i {
            color: var(--primary);
            font-size: 0.9em;
        }

        textarea {
            padding: 20px;
            border: 2px solid var(--gray-light);
            border-radius: 16px;
            font-family: inherit;
            font-size: 15px;
            resize: vertical;
            min-height: 180px;
            transition: all 0.3s ease;
            background: var(--light);
            line-height: 1.6;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
            transform: translateY(-2px);
        }

        .btn {
            padding: 18px 35px;
            border: none;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            box-shadow: 0 10px 25px -5px rgba(99, 102, 241, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 40px -10px rgba(99, 102, 241, 0.6);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--secondary) 0%, #db2777 100%);
            color: white;
            box-shadow: 0 10px 25px -5px rgba(236, 72, 153, 0.4);
        }

        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 40px -10px rgba(236, 72, 153, 0.6);
        }

        .btn-linkedin {
            background: linear-gradient(135deg, var(--linkedin) 0%, var(--linkedin-dark) 100%);
            color: white;
            box-shadow: 0 10px 25px -5px rgba(0, 119, 181, 0.4);
        }

        .btn-linkedin:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 40px -10px rgba(0, 119, 181, 0.6);
        }

        .btn:disabled {
            background: var(--gray-light);
            color: var(--gray);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn:disabled:hover {
            transform: none;
            box-shadow: none;
        }

        .btn:disabled::before {
            display: none;
        }

        .results-section {
            display: flex;
            flex-direction: column;
            gap: 35px;
        }

        .score-container {
            text-align: center;
            padding: 40px 30px;
            background: linear-gradient(135deg, var(--light) 0%, #f1f5f9 100%);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            border: 1px solid rgba(255,255,255,0.5);
        }

        .score-title {
            font-size: 1.6em;
            color: var(--dark);
            margin-bottom: 25px;
            font-weight: 700;
        }

        .circular-progress {
            position: relative;
            width: 220px;
            height: 220px;
            margin: 0 auto;
        }

        .progress-ring {
            transform: rotate(-90deg);
        }

        .progress-ring-bg {
            stroke: var(--gray-light);
            stroke-width: 12;
            fill: transparent;
        }

        .progress-ring-circle {
            transition: all 0.8s ease;
            transform: rotate(90deg);
            transform-origin: 50% 50%;
            stroke-width: 12;
            fill: transparent;
            stroke-linecap: round;
        }

        .score-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3.5em;
            font-weight: 800;
            color: var(--dark);
        }

        .score-text {
            margin-top: 20px;
            font-size: 1.3em;
            color: var(--gray);
            font-weight: 500;
        }

        .recommendations-container {
            background: linear-gradient(135deg, var(--light) 0%, #f1f5f9 100%);
            border-radius: 20px;
            padding: 35px 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            border: 1px solid rgba(255,255,255,0.5);
        }

        .recommendations-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .recommendations-title {
            font-size: 1.6em;
            color: var(--dark);
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .recommendations-title i {
            color: var(--secondary);
        }

        .recommendations-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .recommendation-card {
            background: white;
            padding: 25px;
            border-radius: 16px;
            border-left: 6px solid var(--primary);
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .recommendation-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(99,102,241,0.02) 0%, rgba(236,72,153,0.02) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .recommendation-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .recommendation-card:hover::before {
            opacity: 1;
        }

        .recommendation-card.high {
            border-left-color: var(--danger);
        }

        .recommendation-card.medium {
            border-left-color: var(--warning);
        }

        .recommendation-card.low {
            border-left-color: var(--success);
        }

        .rec-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
            gap: 15px;
        }

        .rec-title {
            font-weight: 700;
            color: var(--dark);
            font-size: 1.2em;
            line-height: 1.4;
            flex: 1;
        }

        .rec-type {
            background: var(--primary);
            color: white;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
            white-space: nowrap;
        }

        .rec-description {
            color: var(--gray);
            line-height: 1.6;
            margin-bottom: 15px;
            font-size: 1em;
        }

        .rec-priority {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 18px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .priority-high {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .priority-medium {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
            border: 1px solid rgba(245, 158, 11, 0.2);
        }

        .priority-low {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        .loading {
            display: none;
            text-align: center;
            padding: 30px;
            background: var(--light);
            border-radius: 16px;
            margin: 10px 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        }

        .loading.show {
            display: block;
        }

        .spinner {
            border: 4px solid var(--gray-light);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error {
            background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%);
            color: white;
            padding: 20px;
            border-radius: 16px;
            margin: 10px 0;
            display: none;
            box-shadow: 0 10px 25px -5px rgba(239, 68, 68, 0.4);
        }

        .error.show {
            display: block;
        }

        .success {
            background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
            color: white;
            padding: 20px;
            border-radius: 16px;
            margin: 10px 0;
            display: none;
            box-shadow: 0 10px 25px -5px rgba(16, 185, 129, 0.4);
        }

        .success.show {
            display: block;
        }

        .empty-state {
            text-align: center;
            padding: 50px 30px;
            color: var(--gray);
        }

        .empty-state i {
            font-size: 3em;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-state h3 {
            font-size: 1.4em;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .priority-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 600;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.85em;
            color: var(--gray);
            font-weight: 500;
        }

        .linkedin-container {
            background: linear-gradient(135deg, var(--light) 0%, #f1f5f9 100%);
            border-radius: 20px;
            padding: 35px 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            border: 1px solid rgba(255,255,255,0.5);
        }

        .linkedin-section {
            margin-bottom: 30px;
        }

        .linkedin-section-title {
            font-size: 1.3em;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .linkedin-section-title i {
            color: var(--linkedin);
        }

        .headline-option, .about-option {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--linkedin);
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }

        .headline-option:hover, .about-option:hover {
            transform: translateX(5px);
        }

        .skill-tag {
            display: inline-block;
            background: rgba(0, 119, 181, 0.1);
            color: var(--linkedin);
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            margin: 2px 5px 2px 0;
            border: 1px solid rgba(0, 119, 181, 0.2);
        }

        .linkedin-recommendation {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--linkedin);
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .copy-btn {
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary);
            border: 1px solid rgba(99, 102, 241, 0.2);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.8em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .copy-btn:hover {
            background: rgba(99, 102, 241, 0.2);
        }

        .copy-btn.copied {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        .tab-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--gray-light);
        }

        .next-tab-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .next-tab-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .next-tab-btn:disabled {
            background: var(--gray-light);
            color: var(--gray);
            cursor: not-allowed;
            transform: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <div class="header-icon">
                    <i class="fas fa-file-alt"></i>
                </div>
                <h1>AI Resume Pro</h1>
                <p>Optimize your resume for Applicant Tracking Systems with intelligent analysis and actionable recommendations</p>
            </div>
        </div>

        <div class="nav-tabs">
            <div class="nav-tab active" data-tab="home">
                <i class="fas fa-home"></i>
                Home
            </div>
            <div class="nav-tab" data-tab="ats-score">
                <i class="fas fa-chart-line"></i>
                ATS Score
            </div>
            <div class="nav-tab" data-tab="recommendations">
                <i class="fas fa-lightbulb"></i>
                Recommendations
            </div>
            <div class="nav-tab" data-tab="linkedin">
                <i class="fab fa-linkedin"></i>
                LinkedIn Suggestions
            </div>
        </div>

        <!-- Home Tab -->
        <div class="tab-content active" id="home-tab">
            <div class="main-content">
                <div class="input-section">
                    <div class="section-title">
                        <i class="fas fa-edit"></i>
                        Input Details
                    </div>

                    <div class="input-group">
                        <label for="jobDescription">
                            <i class="fas fa-briefcase"></i>
                            Job Description
                        </label>
                        <textarea 
                            id="jobDescription" 
                            placeholder="Paste the job description here...&#10;&#10;Example:&#10;We are looking for a skilled Software Engineer with experience in Python, JavaScript, and cloud technologies. The ideal candidate should have strong problem-solving skills, experience with web frameworks like React and Django, and knowledge of database systems. Certifications in AWS or Azure are a plus."
                        ></textarea>
                    </div>

                    <div class="input-group">
                        <label for="resume">
                            <i class="fas fa-file-contract"></i>
                            Your Resume
                        </label>
                        <textarea 
                            id="resume" 
                            placeholder="Paste your resume text here...&#10;&#10;Example:&#10;John Doe&#10;Software Engineer&#10;john.doe@email.com | (123) 456-7890&#10;&#10;EXPERIENCE&#10;Senior Developer - ABC Tech (2020-Present)&#10;- Developed web applications using Python and Django&#10;- Collaborated with frontend team on React components&#10;- Managed MySQL databases and optimized queries&#10;&#10;EDUCATION&#10;BS Computer Science - University of Example (2016-2020)&#10;&#10;SKILLS&#10;- Python, JavaScript&#10;- HTML, CSS&#10;- MySQL&#10;- Git"
                        ></textarea>
                    </div>

                    <button class="btn btn-primary" onclick="analyzeResume()">
                        <i class="fas fa-chart-line"></i>
                        Analyze ATS Score
                    </button>
                    
                    <div class="loading" id="loading">
                        <div class="spinner"></div>
                        <p>Analyzing your resume compatibility...</p>
                    </div>

                    <div class="error" id="error"></div>
                    <div class="success" id="success"></div>
                </div>

                <div class="results-section">
                    <div class="score-container">
                        <div class="score-title">
                            <i class="fas fa-tachometer-alt"></i>
                            How It Works
                        </div>
                        <div style="text-align: left; color: var(--gray); line-height: 1.7;">
                            <p><strong>1. Input Details:</strong> Paste your resume and the job description you're targeting.</p>
                            <p><strong>2. Analyze ATS Score:</strong> Get your resume's compatibility score with the job description.</p>
                            <p><strong>3. Get Recommendations:</strong> Receive personalized suggestions to improve your resume.</p>
                            <p><strong>4. LinkedIn Optimization:</strong> Get tailored suggestions for your LinkedIn profile.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ATS Score Tab -->
        <div class="tab-content" id="ats-score-tab">
            <div class="score-container">
                <div class="score-title">
                    <i class="fas fa-tachometer-alt"></i>
                    ATS Compatibility Score
                </div>
                <div class="circular-progress">
                    <svg class="progress-ring" width="220" height="220">
                        <circle class="progress-ring-bg" r="100" cx="110" cy="110"/>
                        <circle class="progress-ring-circle" 
                                id="progressCircle"
                                stroke="#6366f1" 
                                r="100" 
                                cx="110" 
                                cy="110"
                                stroke-dasharray="628.32"
                                stroke-dashoffset="628.32"/>
                    </svg>
                    <div class="score-value" id="scoreValue">0</div>
                </div>
                <div class="score-text" id="scoreText">Analyze your resume to see compatibility score</div>
                
                <div class="stats-container" id="statsContainer" style="display: none;">
                    <div class="stat-item">
                        <div class="stat-value" id="keywordScore">0%</div>
                        <div class="stat-label">Keyword Match</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="skillScore">0%</div>
                        <div class="stat-label">Skill Match</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="structureScore">0%</div>
                        <div class="stat-label">Structure</div>
                    </div>
                </div>

                <div class="tab-navigation">
                    <div></div>
                    <button class="next-tab-btn" onclick="switchTab('recommendations')" id="nextToRecommendations" disabled>
                        Next: Recommendations <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Recommendations Tab -->
        <div class="tab-content" id="recommendations-tab">
            <div class="recommendations-container">
                <div class="recommendations-header">
                    <div class="recommendations-title">
                        <i class="fas fa-lightbulb"></i>
                        Improvement Recommendations
                    </div>
                    <button class="btn btn-secondary" onclick="getRecommendations()" id="recommendationsBtn">
                        <i class="fas fa-magic"></i>
                        Get Detailed Recommendations
                    </button>
                </div>
                <div class="recommendations-list" id="recommendationsList">
                    <div class="empty-state">
                        <i class="fas fa-chart-pie"></i>
                        <h3>No Recommendations Yet</h3>
                        <p>Click "Get Detailed Recommendations" to see how to improve your resume</p>
                    </div>
                </div>

                <div class="tab-navigation">
                    <button class="next-tab-btn" onclick="switchTab('ats-score')">
                        <i class="fas fa-arrow-left"></i> Back: ATS Score
                    </button>
                    <button class="next-tab-btn" onclick="switchTab('linkedin')" id="nextToLinkedIn" disabled>
                        Next: LinkedIn Suggestions <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- LinkedIn Suggestions Tab -->
        <div class="tab-content" id="linkedin-tab">
            <div class="linkedin-container">
                <div class="recommendations-header">
                    <div class="recommendations-title">
                        <i class="fab fa-linkedin"></i>
                        LinkedIn Optimization
                    </div>
                    <button class="btn btn-linkedin" onclick="getLinkedInSuggestions()" id="linkedinBtn">
                        <i class="fab fa-linkedin"></i>
                        Get LinkedIn Suggestions
                    </button>
                </div>
                <div class="linkedin-content" id="linkedinContent">
                    <div class="empty-state">
                        <i class="fab fa-linkedin"></i>
                        <h3>Boost Your LinkedIn Profile</h3>
                        <p>Get personalized suggestions for your LinkedIn headline, about section, and profile optimization</p>
                    </div>
                </div>

                <div class="tab-navigation">
                    <button class="next-tab-btn" onclick="switchTab('recommendations')">
                        <i class="fas fa-arrow-left"></i> Back: Recommendations
                    </button>
                    <div></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentScore = 0;
        let currentResume = '';
        let currentJobDescription = '';

        // Tab switching functionality
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav tabs
            document.querySelectorAll('.nav-tab').forEach(navTab => {
                navTab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(`${tabName}-tab`).classList.add('active');
            
            // Activate corresponding nav tab
            document.querySelector(`.nav-tab[data-tab="${tabName}"]`).classList.add('active');
        }

        // Add click event listeners to nav tabs
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                switchTab(this.getAttribute('data-tab'));
            });
        });

        function setProgress(score) {
            const circle = document.getElementById('progressCircle');
            const radius = 100;
            const circumference = 2 * Math.PI * radius;
            const offset = circumference - (score / 100) * circumference;
            
            circle.style.strokeDasharray = `${circumference} ${circumference}`;
            circle.style.strokeDashoffset = offset;
            
            // Change color based on score
            if (score >= 80) {
                circle.style.stroke = '#10b981';
            } else if (score >= 60) {
                circle.style.stroke = '#f59e0b';
            } else {
                circle.style.stroke = '#ef4444';
            }
        }

        function showMessage(elementId, message, isError = false) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = isError ? 'error show' : 'success show';
            
            setTimeout(() => {
                element.className = isError ? 'error' : 'success';
            }, 5000);
        }

        function showLoading(show) {
            const loading = document.getElementById('loading');
            if (show) {
                loading.classList.add('show');
            } else {
                loading.classList.remove('show');
            }
        }

        async function analyzeResume() {
            const resume = document.getElementById('resume').value;
            const jobDescription = document.getElementById('jobDescription').value;
            
            if (!resume.trim() || !jobDescription.trim()) {
                showMessage('error', 'Please fill in both resume and job description fields.', true);
                return;
            }

            // Show loading and disable button
            showLoading(true);
            const analyzeBtn = document.querySelector('.btn-primary');
            analyzeBtn.disabled = true;
            analyzeBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Analyzing...';

            try {
                const response = await fetch('/analyze', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        resume: resume,
                        job_description: jobDescription
                    })
                });

                const data = await response.json();

                if (!response.ok) {
                    throw new Error(data.error || 'Analysis failed');
                }

                currentScore = data.ats_score;
                currentResume = resume;
                currentJobDescription = jobDescription;

                // Update score display
                document.getElementById('scoreValue').textContent = currentScore;
                setProgress(currentScore);

                // Update score text
                let scoreText = '';
                if (currentScore >= 90) {
                    scoreText = 'Excellent! Your resume is highly optimized.';
                } else if (currentScore >= 70) {
                    scoreText = 'Good! Some improvements can be made.';
                } else if (currentScore >= 50) {
                    scoreText = 'Fair. Consider implementing the recommendations.';
                } else {
                    scoreText = 'Needs significant improvement.';
                }
                document.getElementById('scoreText').textContent = scoreText;

                // Show stats
                document.getElementById('statsContainer').style.display = 'grid';
                document.getElementById('keywordScore').textContent = Math.min(currentScore + 20, 95) + '%';
                document.getElementById('skillScore').textContent = Math.min(currentScore + 10, 90) + '%';
                document.getElementById('structureScore').textContent = Math.min(currentScore + 5, 85) + '%';

                // Enable next button
                document.getElementById('nextToRecommendations').disabled = false;

                showMessage('success', 'Analysis completed successfully! Your resume score: ' + currentScore + '/100');

                // Automatically switch to ATS Score tab
                setTimeout(() => {
                    switchTab('ats-score');
                }, 1000);

            } catch (error) {
                showMessage('error', 'Error: ' + error.message, true);
            } finally {
                showLoading(false);
                analyzeBtn.disabled = false;
                analyzeBtn.innerHTML = '<i class="fas fa-chart-line"></i> Analyze ATS Score';
            }
        }

        async function getRecommendations() {
            const recommendationsBtn = document.getElementById('recommendationsBtn');
            
            // Disable button and show loading
            recommendationsBtn.disabled = true;
            recommendationsBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating Recommendations...';
            showLoading(true);

            try {
                const response = await fetch('/recommendations', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        resume: currentResume,
                        job_description: currentJobDescription,
                        current_score: currentScore
                    })
                });

                const data = await response.json();

                if (!response.ok) {
                    throw new Error(data.error || 'Failed to get recommendations');
                }

                // Sort recommendations by priority: high -> medium -> low
                const sortedRecommendations = data.recommendations.sort((a, b) => {
                    const priorityOrder = { high: 0, medium: 1, low: 2 };
                    return priorityOrder[a.priority] - priorityOrder[b.priority];
                });

                displayRecommendations(sortedRecommendations);
                
                // Enable next button
                document.getElementById('nextToLinkedIn').disabled = false;
                
                showMessage('success', 'Generated ' + sortedRecommendations.length + ' personalized recommendations!');

            } catch (error) {
                showMessage('error', 'Error: ' + error.message, true);
            } finally {
                showLoading(false);
                recommendationsBtn.disabled = false;
                recommendationsBtn.innerHTML = '<i class="fas fa-magic"></i> Get Detailed Recommendations';
            }
        }

        function displayRecommendations(recommendations) {
            const container = document.getElementById('recommendationsList');
            
            if (!recommendations || recommendations.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-check-circle"></i>
                        <h3>No Recommendations Needed</h3>
                        <p>Your resume looks great! No major improvements needed at this time.</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = recommendations.map(rec => `
                <div class="recommendation-card ${rec.priority}">
                    <div class="rec-header">
                        <div class="rec-title">${rec.title}</div>
                        <div class="rec-type">${rec.type.charAt(0).toUpperCase() + rec.type.slice(1)}</div>
                    </div>
                    <div class="rec-description">${rec.description}</div>
                    <div class="rec-priority priority-${rec.priority}">
                        <i class="fas fa-${getPriorityIcon(rec.priority)}"></i>
                        ${rec.priority.toUpperCase()} PRIORITY
                    </div>
                </div>
            `).join('');
        }

        async function getLinkedInSuggestions() {
            const linkedinBtn = document.getElementById('linkedinBtn');
            
            // Disable button and show loading
            linkedinBtn.disabled = true;
            linkedinBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating LinkedIn Suggestions...';
            showLoading(true);

            try {
                const response = await fetch('/linkedin-suggestions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        resume: currentResume,
                        job_description: currentJobDescription
                    })
                });

                const data = await response.json();

                if (!response.ok) {
                    throw new Error(data.error || 'Failed to get LinkedIn suggestions');
                }

                displayLinkedInSuggestions(data.linkedin_suggestions);
                showMessage('success', 'LinkedIn suggestions generated successfully!');

            } catch (error) {
                showMessage('error', 'Error: ' + error.message, true);
            } finally {
                showLoading(false);
                linkedinBtn.disabled = false;
                linkedinBtn.innerHTML = '<i class="fab fa-linkedin"></i> Get LinkedIn Suggestions';
            }
        }

        function displayLinkedInSuggestions(suggestions) {
            const container = document.getElementById('linkedinContent');
            
            let content = `
                <div class="linkedin-section">
                    <div class="linkedin-section-title">
                        <i class="fas fa-heading"></i>
                        LinkedIn Headline Suggestions
                    </div>
            `;
            
            // Headline suggestions
            suggestions.headline.forEach((headline, index) => {
                content += `
                    <div class="headline-option">
                        <div style="font-weight: 600; margin-bottom: 8px; color: var(--dark);">Option ${index + 1}:</div>
                        <div style="color: var(--gray); line-height: 1.5; margin-bottom: 10px;">${headline}</div>
                        <button class="copy-btn" onclick="copyToClipboard('${headline.replace(/'/g, "\\'")}', this)">
                            <i class="fas fa-copy"></i> Copy Headline
                        </button>
                    </div>
                `;
            });
            
            content += `</div>`;
            
            // About section suggestions
            content += `
                <div class="linkedin-section">
                    <div class="linkedin-section-title">
                        <i class="fas fa-file-alt"></i>
                        About Section Templates
                    </div>
            `;
            
            suggestions.about.forEach((about, index) => {
                content += `
                    <div class="about-option">
                        <div style="font-weight: 600; margin-bottom: 8px; color: var(--dark);">Template ${index + 1}:</div>
                        <div style="color: var(--gray); line-height: 1.6; margin-bottom: 10px;">${about}</div>
                        <button class="copy-btn" onclick="copyToClipboard('${about.replace(/'/g, "\\'")}', this)">
                            <i class="fas fa-copy"></i> Copy About Section
                        </button>
                    </div>
                `;
            });
            
            content += `</div>`;
            
            // Skills suggestions
            content += `
                <div class="linkedin-section">
                    <div class="linkedin-section-title">
                        <i class="fas fa-star"></i>
                        Skills Optimization
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 12px;">
                        <div style="font-weight: 600; margin-bottom: 15px; color: var(--dark);">Featured Skills to Highlight:</div>
                        <div style="margin-bottom: 20px;">
                            ${suggestions.skills.featured_skills.map(skill => 
                                `<span class="skill-tag">${skill}</span>`
                            ).join('')}
                        </div>
                        ${suggestions.skills.skills_to_add.length > 0 ? `
                            <div style="font-weight: 600; margin-bottom: 10px; color: var(--dark);">Skills to Consider Adding:</div>
                            <div>
                                ${suggestions.skills.skills_to_add.map(skill => 
                                    `<span class="skill-tag" style="background: rgba(239,68,68,0.1); color: var(--danger); border-color: rgba(239,68,68,0.2);">${skill}</span>`
                                ).join('')}
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
            
            // Profile recommendations
            content += `
                <div class="linkedin-section">
                    <div class="linkedin-section-title">
                        <i class="fas fa-user-edit"></i>
                        Profile Recommendations
                    </div>
                    <div class="recommendations-list">
            `;
            
            suggestions.recommendations.forEach(rec => {
                content += `
                    <div class="recommendation-card ${rec.priority}">
                        <div class="rec-header">
                            <div class="rec-title">${rec.title}</div>
                        </div>
                        <div class="rec-description">${rec.description}</div>
                        <div class="rec-priority priority-${rec.priority}">
                            <i class="fas fa-${getPriorityIcon(rec.priority)}"></i>
                            ${rec.priority.toUpperCase()} PRIORITY
                        </div>
                    </div>
                `;
            });
            
            content += `</div></div>`;
            
            container.innerHTML = content;
        }

        function getPriorityIcon(priority) {
            switch(priority) {
                case 'high': return 'exclamation-triangle';
                case 'medium': return 'exclamation-circle';
                case 'low': return 'info-circle';
                default: return 'info-circle';
            }
        }

        function copyToClipboard(text, button) {
            navigator.clipboard.writeText(text).then(() => {
                const originalText = button.innerHTML;
                button.innerHTML = '<i class="fas fa-check"></i> Copied!';
                button.classList.add('copied');
                
                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.classList.remove('copied');
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy text: ', err);
            });
        }

        // Initialize with zero progress
        setProgress(0);
    </script>
</body>
</html>
